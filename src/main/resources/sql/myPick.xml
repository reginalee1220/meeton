<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="myPick">

    <select id="my_bookmark">
        select * from favorite where userid=#{userid} and type='bookmark'
    </select>

    <!-- 즐겨찾기 채널 목록 -->
    <select id="favoriteList" parameterType="String" resultType="Favorite">
        select profile, r.* from user inner join
            (select channel.*, favorite.type form channel
                                    inner join favorite on channel.channelnum = favorite.channelnum
                where favorite.userid = #{userid}) r on user.userid = r.userid

    </select>

    <!-- 최근에 본 영상 목록 -->
    <select id="historyList" resultType="video">
        select videonum, channelnum, userid, title, description, thumbnail, visibility,
               (TIMESTAMPDIFF(HOUR, register, CURDATE())) register , views, likes, videofile, videotime
        from video
        where favorite.userid = #{userid}) r on user.userid = r.userid

    </select>



</mapper>